<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="600" fill="#333">Package System Flow</text>

  <!-- Main Components -->
  <!-- User Request -->
  <rect x="20" y="60" width="100" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="70" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">User Request</text>

  <!-- start.bas -->
  <rect x="160" y="60" width="100" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="210" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">start.bas</text>

  <!-- LLM Engine -->
  <rect x="300" y="60" width="100" height="40" fill="none" stroke="#BD10E0" stroke-width="2" rx="5"/>
  <text x="350" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">LLM Engine</text>

  <!-- Bot Response -->
  <rect x="440" y="60" width="100" height="40" fill="none" stroke="#50E3C2" stroke-width="2" rx="5"/>
  <text x="490" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Bot Response</text>

  <!-- Supporting Components -->
  <!-- Vector Search -->
  <rect x="240" y="160" width="120" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="300" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Vector Search</text>

  <!-- .gbkb docs -->
  <rect x="240" y="240" width="120" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="300" y="265" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">.gbkb docs</text>

  <!-- BASIC Commands Detail -->
  <g transform="translate(580, 60)">
    <rect width="200" height="120" fill="none" stroke="#7ED321" stroke-width="2" rx="5"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">BASIC Commands</text>
    <text x="10" y="50" font-family="monospace" font-size="12" fill="#666">USE KB "docs"</text>
    <text x="10" y="70" font-family="monospace" font-size="12" fill="#666">answer = HEAR</text>
    <text x="10" y="90" font-family="monospace" font-size="12" fill="#666">result = LLM()</text>
    <text x="10" y="110" font-family="monospace" font-size="12" fill="#666">TALK result</text>
  </g>

  <!-- Package Structure -->
  <g transform="translate(580, 210)">
    <rect width="200" height="140" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
    <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Package Structure</text>
    <text x="10" y="50" font-family="monospace" font-size="12" fill="#666">my-bot.gbai/</text>
    <text x="20" y="70" font-family="monospace" font-size="12" fill="#666">├─ .gbdialog/</text>
    <text x="20" y="90" font-family="monospace" font-size="12" fill="#666">├─ .gbkb/</text>
    <text x="20" y="110" font-family="monospace" font-size="12" fill="#666">└─ .gbot/</text>
  </g>

  <!-- Flow Arrows -->
  <g stroke="#666" stroke-width="2" fill="none">
    <!-- Main flow -->
    <line x1="120" y1="80" x2="160" y2="80" marker-end="url(#arrow)"/>
    <line x1="260" y1="80" x2="300" y2="80" marker-end="url(#arrow)"/>
    <line x1="400" y1="80" x2="440" y2="80" marker-end="url(#arrow)"/>

    <!-- LLM to Vector Search (downward) -->
    <line x1="350" y1="100" x2="300" y2="160" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- Vector Search to .gbkb docs -->
    <line x1="300" y1="200" x2="300" y2="240" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- Feedback from start.bas to Vector Search (Results) -->
    <path d="M240,100 Q240,130 270,130 Q270,160 270,160" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- Feedback from Vector Search to LLM (Context) -->
    <path d="M330,160 Q330,130 350,130 Q350,110 350,100" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- Connection from start.bas to BASIC Commands (top right) -->
    <path d="M260,70 Q400,40 580,80" stroke-dasharray="2,2" opacity="0.3"/>

    <!-- Connection from .gbkb docs to Package Structure (bottom right) -->
    <path d="M360,265 Q470,280 580,290" stroke-dasharray="2,2" opacity="0.3"/>
  </g>

  <!-- Labels on key connections -->
  <text x="340" y="50" font-family="Arial, sans-serif" font-size="11" fill="#666">Commands</text>
  <text x="230" y="145" font-family="Arial, sans-serif" font-size="11" fill="#666">Results</text>
  <text x="365" y="145" font-family="Arial, sans-serif" font-size="11" fill="#666">Query</text>
  <text x="340" y="125" font-family="Arial, sans-serif" font-size="11" fill="#666">Context</text>

  <!-- Description -->
  <text x="400" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">
    BASIC scripts orchestrate LLM decisions, vector search, and responses with zero configuration
  </text>
</svg>
