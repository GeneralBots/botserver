<svg width="1400" height="900" xmlns="http://www.w3.org/2000/svg">
  <style>
    /* Light theme defaults */
    .neon-blue { stroke: #4A90E2; stroke-width: 2.6; fill: none; }
    .neon-orange { stroke: #F5A623; stroke-width: 2.6; fill: none; }
    .neon-purple { stroke: #BD10E0; stroke-width: 2.6; fill: none; }
    .neon-green { stroke: #7ED321; stroke-width: 2.6; fill: none; }
    .neon-cyan { stroke: #50E3C2; stroke-width: 2.6; fill: none; }
    .neon-gray { stroke: #666666; stroke-width: 2.6; fill: none; }
    .main-text { fill: #1a1a1a; font-family: Arial, sans-serif; }
    .secondary-text { fill: #666; font-family: Arial, sans-serif; }
    .arrow-color { stroke: #666; fill: #666; }

    /* Dark theme with subtle neon effects */
    @media (prefers-color-scheme: dark) {
      .neon-blue {
        stroke: #00D4FF;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #00D4FF) drop-shadow(0 0 8px #00A0FF);
      }
      .neon-orange {
        stroke: #FF9500;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #FF9500) drop-shadow(0 0 8px #FF7700);
      }
      .neon-purple {
        stroke: #E040FB;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #E040FB) drop-shadow(0 0 8px #D500F9);
      }
      .neon-green {
        stroke: #00FF88;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #00FF88) drop-shadow(0 0 8px #00E676);
      }
      .neon-cyan {
        stroke: #00E5EA;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #00E5EA) drop-shadow(0 0 8px #00BCD4);
      }
      .neon-gray {
        stroke: #888888;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 2px #888888);
      }
      .main-text { fill: #FFFFFF; }
      .secondary-text { fill: #B0B0B0; }
      .arrow-color { stroke: #B0B0B0; fill: #B0B0B0; }
    }
  </style>

  <defs>
    <marker id="arrow" markerWidth="13" markerHeight="13" refX="11.7" refY="3.9" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,7.8 L11.7,3.9 z" class="arrow-color"/>
    </marker>
    <linearGradient id="flowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:0.3" />
      <stop offset="25%" style="stop-color:#F5A623;stop-opacity:0.3" />
      <stop offset="50%" style="stop-color:#BD10E0;stop-opacity:0.3" />
      <stop offset="75%" style="stop-color:#7ED321;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#50E3C2;stop-opacity:0.3" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="700" y="45" text-anchor="middle" font-size="32" font-weight="600" class="main-text">General Bots Architecture</text>
  <text x="700" y="75" text-anchor="middle" font-size="21" class="secondary-text">Single binary with everything included - no external dependencies</text>

  <!-- Phase Labels -->
  <text x="180" y="115" text-anchor="middle" font-size="21" font-weight="500" class="secondary-text">Interface Layer</text>
  <text x="700" y="115" text-anchor="middle" font-size="21" font-weight="500" class="secondary-text">Core Runtime</text>
  <text x="1220" y="115" text-anchor="middle" font-size="21" font-weight="500" class="secondary-text">Processing</text>

  <!-- MAIN FLOW DIAGRAM (Upper Section) -->
  <g id="main-flow">
    <!-- Top Layer - Interface Components -->
    <!-- Web Server -->
    <rect x="50" y="140" width="130" height="60" class="neon-blue" rx="6.5"/>
    <text x="115" y="178" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Web Server</text>

    <!-- Console UI -->
    <rect x="200" y="140" width="130" height="60" class="neon-cyan" rx="6.5"/>
    <text x="265" y="178" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Console UI</text>

    <!-- BASIC Interpreter -->
    <rect x="480" y="140" width="180" height="60" class="neon-orange" rx="6.5"/>
    <text x="570" y="178" text-anchor="middle" font-size="22" font-weight="500" class="main-text">BASIC Interpreter</text>

    <!-- LLM Integration -->
    <rect x="680" y="140" width="160" height="60" class="neon-purple" rx="6.5"/>
    <text x="760" y="178" text-anchor="middle" font-size="22" font-weight="500" class="main-text">LLM Integration</text>

    <!-- Package Manager -->
    <rect x="860" y="140" width="170" height="60" class="neon-green" rx="6.5"/>
    <text x="945" y="178" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Package Manager</text>

    <!-- BotModels -->
    <rect x="1135" y="140" width="160" height="60" class="neon-purple" rx="6.5"/>
    <text x="1215" y="178" text-anchor="middle" font-size="22" font-weight="500" class="main-text">BotModels (AI)</text>

    <!-- Middle Layer - Session Manager -->
    <rect x="350" y="280" width="400" height="60" class="neon-blue" rx="6.5"/>
    <text x="550" y="318" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Session Manager (Tokio Async Runtime)</text>

    <!-- Channels Box -->
    <rect x="800" y="280" width="150" height="60" class="neon-cyan" rx="6.5"/>
    <text x="875" y="318" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Channels</text>

    <!-- External API -->
    <rect x="980" y="280" width="140" height="60" class="neon-orange" rx="6.5"/>
    <text x="1050" y="318" text-anchor="middle" font-size="22" font-weight="500" class="main-text">External API</text>

    <!-- Data Layer Components -->
    <!-- PostgreSQL -->
    <rect x="50" y="420" width="140" height="60" class="neon-orange" rx="6.5"/>
    <text x="120" y="458" text-anchor="middle" font-size="22" font-weight="500" class="main-text">PostgreSQL</text>

    <!-- Valkey Cache -->
    <rect x="210" y="420" width="140" height="60" class="neon-purple" rx="6.5"/>
    <text x="280" y="458" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Valkey Cache</text>

    <!-- Qdrant Vectors -->
    <rect x="370" y="420" width="150" height="60" class="neon-green" rx="6.5"/>
    <text x="445" y="458" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Qdrant Vectors</text>

    <!-- SeaweedFS -->
    <rect x="540" y="420" width="150" height="60" class="neon-cyan" rx="6.5"/>
    <text x="615" y="458" text-anchor="middle" font-size="22" font-weight="500" class="main-text">SeaweedFS</text>

    <!-- Storage Contents Box -->
    <rect x="720" y="420" width="350" height="60" class="neon-gray" rx="6.5"/>
    <text x="895" y="448" text-anchor="middle" font-size="18" class="secondary-text">.gbkb (Docs) | .gbdialog (Scripts) | .gbot (Config)</text>
    <text x="895" y="470" text-anchor="middle" font-size="18" class="secondary-text">Templates | User Assets</text>

    <!-- Directory Services -->
    <rect x="1090" y="420" width="140" height="60" class="neon-blue" rx="6.5"/>
    <text x="1160" y="458" text-anchor="middle" font-size="22" font-weight="500" class="main-text">Zitadel (IAM)</text>
  </g>

  <!-- Arrows -->
  <g stroke="#666" stroke-width="2.6" fill="none" opacity="0.7">
    <!-- Top layer to Session Manager -->
    <line x1="115" y1="200" x2="400" y2="280" marker-end="url(#arrow)"/>
    <line x1="265" y1="200" x2="450" y2="280" marker-end="url(#arrow)"/>
    <line x1="570" y1="200" x2="550" y2="280" marker-end="url(#arrow)"/>
    <line x1="760" y1="200" x2="650" y2="280" marker-end="url(#arrow)"/>
    <line x1="945" y1="200" x2="750" y2="280" marker-end="url(#arrow)"/>

    <!-- BotModels connection -->
    <line x1="1215" y1="200" x2="1050" y2="280" stroke-dasharray="3.9,3.9" marker-end="url(#arrow)" opacity="0.5"/>

    <!-- Session Manager to Data Layer -->
    <line x1="400" y1="340" x2="120" y2="420" marker-end="url(#arrow)"/>
    <line x1="450" y1="340" x2="280" y2="420" marker-end="url(#arrow)"/>
    <line x1="550" y1="340" x2="445" y2="420" marker-end="url(#arrow)"/>
    <line x1="650" y1="340" x2="615" y2="420" marker-end="url(#arrow)"/>
    <line x1="700" y1="340" x2="820" y2="420" marker-end="url(#arrow)"/>

    <!-- Channels/External connections -->
    <line x1="875" y1="340" x2="920" y2="420" marker-end="url(#arrow)"/>
    <line x1="1050" y1="340" x2="1160" y2="420" stroke-dasharray="3.9,3.9" marker-end="url(#arrow)" opacity="0.5"/>
  </g>

  <!-- PROGRESS INDICATOR (Lower Section) -->
  <g id="progress-legend">
    <!-- Background gradient bar -->
    <rect x="50" y="560" width="1300" height="100" fill="url(#flowGradient)" rx="10" opacity="0.2"/>

    <!-- Stage markers -->
    <circle cx="150" cy="610" r="12" class="neon-blue"/>
    <circle cx="400" cy="610" r="12" class="neon-orange"/>
    <circle cx="650" cy="610" r="12" class="neon-purple"/>
    <circle cx="900" cy="610" r="12" class="neon-green"/>
    <circle cx="1150" cy="610" r="12" class="neon-cyan"/>

    <!-- Connecting lines -->
    <line x1="162" y1="610" x2="388" y2="610" class="arrow-color" stroke-width="2" opacity="0.4"/>
    <line x1="412" y1="610" x2="638" y2="610" class="arrow-color" stroke-width="2" opacity="0.4"/>
    <line x1="662" y1="610" x2="888" y2="610" class="arrow-color" stroke-width="2" opacity="0.4"/>
    <line x1="912" y1="610" x2="1138" y2="610" class="arrow-color" stroke-width="2" opacity="0.4"/>

    <!-- Stage labels -->
    <text x="150" y="580" text-anchor="middle" font-size="18" font-weight="500" class="main-text">Request</text>
    <text x="150" y="650" text-anchor="middle" font-size="16" class="secondary-text">Web/Console</text>

    <text x="400" y="580" text-anchor="middle" font-size="18" font-weight="500" class="main-text">Process</text>
    <text x="400" y="650" text-anchor="middle" font-size="16" class="secondary-text">BASIC + LLM</text>

    <text x="650" y="580" text-anchor="middle" font-size="18" font-weight="500" class="main-text">Decide</text>
    <text x="650" y="650" text-anchor="middle" font-size="16" class="secondary-text">AI Routing</text>

    <text x="900" y="580" text-anchor="middle" font-size="18" font-weight="500" class="main-text">Execute</text>
    <text x="900" y="650" text-anchor="middle" font-size="16" class="secondary-text">Tools + APIs</text>

    <text x="1150" y="580" text-anchor="middle" font-size="18" font-weight="500" class="main-text">Respond</text>
    <text x="1150" y="650" text-anchor="middle" font-size="16" class="secondary-text">Multi-Channel</text>
  </g>

  <!-- Legend -->
  <g id="legend" transform="translate(50, 720)">
    <text x="0" y="0" font-size="18" font-weight="500" class="main-text">Component Types:</text>

    <rect x="0" y="20" width="24" height="24" class="neon-blue" rx="4"/>
    <text x="35" y="38" font-size="16" class="secondary-text">Interface / Routing</text>

    <rect x="200" y="20" width="24" height="24" class="neon-orange" rx="4"/>
    <text x="235" y="38" font-size="16" class="secondary-text">Processing / Scripts</text>

    <rect x="420" y="20" width="24" height="24" class="neon-purple" rx="4"/>
    <text x="455" y="38" font-size="16" class="secondary-text">AI / ML / Decision</text>

    <rect x="640" y="20" width="24" height="24" class="neon-green" rx="4"/>
    <text x="675" y="38" font-size="16" class="secondary-text">Execution / Storage</text>

    <rect x="870" y="20" width="24" height="24" class="neon-cyan" rx="4"/>
    <text x="905" y="38" font-size="16" class="secondary-text">Output / Response</text>
  </g>

  <!-- Description -->
  <text x="700" y="810" text-anchor="middle" font-size="21" class="secondary-text">
    Rust-powered single binary serving web UI, BASIC scripting, LLM orchestration, and multi-channel messaging
  </text>
  <text x="700" y="845" text-anchor="middle" font-size="21" class="secondary-text">
    Auto-installed infrastructure: PostgreSQL, Valkey, Qdrant, SeaweedFS, Zitadel - zero external dependencies
  </text>
</svg>
