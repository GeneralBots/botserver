<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="600" fill="#333">General Bots Architecture</text>

  <!-- Top Layer Components -->
  <!-- Web Server -->
  <rect x="20" y="60" width="100" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="70" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Web Server</text>

  <!-- BASIC Interpreter -->
  <rect x="160" y="60" width="120" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="220" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">BASIC Interpreter</text>

  <!-- LLM Integration -->
  <rect x="320" y="60" width="100" height="40" fill="none" stroke="#BD10E0" stroke-width="2" rx="5"/>
  <text x="370" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">LLM Integration</text>

  <!-- Package Manager -->
  <rect x="460" y="60" width="120" height="40" fill="none" stroke="#7ED321" stroke-width="2" rx="5"/>
  <text x="520" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Package Manager</text>

  <!-- Console UI -->
  <rect x="620" y="60" width="100" height="40" fill="none" stroke="#50E3C2" stroke-width="2" rx="5"/>
  <text x="670" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Console UI</text>

  <!-- Session Manager (Middle Layer) -->
  <rect x="250" y="160" width="300" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="400" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Session Manager (Tokio Async Runtime)</text>

  <!-- Data Layer Components -->
  <!-- PostgreSQL -->
  <rect x="20" y="260" width="100" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="70" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">PostgreSQL</text>

  <!-- Valkey Cache -->
  <rect x="160" y="260" width="100" height="40" fill="none" stroke="#BD10E0" stroke-width="2" rx="5"/>
  <text x="210" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Valkey Cache</text>

  <!-- Qdrant Vectors -->
  <rect x="300" y="260" width="100" height="40" fill="none" stroke="#7ED321" stroke-width="2" rx="5"/>
  <text x="350" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Qdrant Vectors</text>

  <!-- Object Storage -->
  <rect x="440" y="260" width="100" height="40" fill="none" stroke="#50E3C2" stroke-width="2" rx="5"/>
  <text x="490" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Object Storage</text>

  <!-- Channels -->
  <rect x="580" y="260" width="100" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="630" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">Channels</text>

  <!-- External Services -->
  <rect x="700" y="260" width="80" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="740" y="285" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">External API</text>

  <!-- Arrows -->
  <g stroke="#666" stroke-width="2" fill="none">
    <!-- Top layer to Session Manager -->
    <line x1="70" y1="100" x2="250" y2="160" opacity="0.6"/>
    <line x1="220" y1="100" x2="300" y2="160" opacity="0.6"/>
    <line x1="370" y1="100" x2="400" y2="160" opacity="0.6"/>
    <line x1="520" y1="100" x2="500" y2="160" opacity="0.6"/>
    <line x1="670" y1="100" x2="550" y2="160" opacity="0.6"/>

    <!-- Session Manager to Data Layer -->
    <line x1="260" y1="200" x2="70" y2="260" opacity="0.6"/>
    <line x1="320" y1="200" x2="210" y2="260" opacity="0.6"/>
    <line x1="400" y1="200" x2="350" y2="260" opacity="0.6"/>
    <line x1="480" y1="200" x2="490" y2="260" opacity="0.6"/>
    <line x1="540" y1="200" x2="630" y2="260" opacity="0.6"/>

    <!-- External API connections (dashed) -->
    <path d="M740,260 Q740,220 550,180" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.4"/>
  </g>

  <!-- Storage Detail Box -->
  <g transform="translate(20, 330)">
    <rect width="760" height="50" fill="none" stroke="#666" stroke-width="1" rx="5" opacity="0.3"/>
    <text x="10" y="25" font-family="Arial, sans-serif" font-size="12" fill="#666">Storage Contents:</text>
    <text x="130" y="25" font-family="Arial, sans-serif" font-size="12" fill="#666">.gbkb (Documents)</text>
    <text x="280" y="25" font-family="Arial, sans-serif" font-size="12" fill="#666">.gbdialog (Scripts)</text>
    <text x="430" y="25" font-family="Arial, sans-serif" font-size="12" fill="#666">.gbot (Configs)</text>
    <text x="560" y="25" font-family="Arial, sans-serif" font-size="12" fill="#666">Templates</text>
    <text x="660" y="25" font-family="Arial, sans-serif" font-size="12" fill="#666">User Assets</text>
  </g>

  <!-- Description -->
  <text x="400" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">
    Single binary with everything included - no external dependencies
  </text>
</svg>
