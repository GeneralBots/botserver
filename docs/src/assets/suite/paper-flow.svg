<svg width="1400" height="900" xmlns="http://www.w3.org/2000/svg">
  <style>
    /* Light theme defaults */
    .neon-blue { stroke: #4A90E2; stroke-width: 2.6; }
    .neon-orange { stroke: #F5A623; stroke-width: 2.6; }
    .neon-purple { stroke: #BD10E0; stroke-width: 2.6; }
    .neon-green { stroke: #7ED321; stroke-width: 2.6; }
    .neon-cyan { stroke: #50E3C2; stroke-width: 2.6; }
    .neon-pink { stroke: #FF6B9D; stroke-width: 2.6; }
    .neon-yellow { stroke: #F8E71C; stroke-width: 2.6; }
    .main-text { fill: #1a1a1a; }
    .secondary-text { fill: #666; }
    .arrow-color { stroke: #666; fill: #666; }

    @media (prefers-color-scheme: dark) {
      .neon-blue {
        stroke: #00D4FF;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #00D4FF) drop-shadow(0 0 8px #00A0FF);
      }
      .neon-orange {
        stroke: #FF9500;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #FF9500) drop-shadow(0 0 8px #FF7700);
      }
      .neon-purple {
        stroke: #E040FB;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #E040FB) drop-shadow(0 0 8px #D500F9);
      }
      .neon-green {
        stroke: #00FF88;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #00FF88) drop-shadow(0 0 8px #00E676);
      }
      .neon-cyan {
        stroke: #00E5EA;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #00E5EA) drop-shadow(0 0 8px #00BCD4);
      }
      .neon-pink {
        stroke: #FF6B9D;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #FF6B9D) drop-shadow(0 0 8px #FF8FAB);
      }
      .neon-yellow {
        stroke: #FFE066;
        stroke-width: 2.8;
        filter: drop-shadow(0 0 4px #FFE066) drop-shadow(0 0 8px #FFD93D);
      }
      .main-text { fill: #FFFFFF; }
      .secondary-text { fill: #B0B0B0; }
      .arrow-color { stroke: #B0B0B0; fill: #B0B0B0; }
    }
  </style>

  <defs>
    <marker id="arrow" markerWidth="13" markerHeight="13" refX="11.7" refY="3.9" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,7.8 L11.7,3.9 z" class="arrow-color"/>
    </marker>
    <linearGradient id="flowGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4A90E2;stop-opacity:0.3" />
      <stop offset="33%" style="stop-color:#BD10E0;stop-opacity:0.3" />
      <stop offset="66%" style="stop-color:#7ED321;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#50E3C2;stop-opacity:0.3" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="700" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="32" font-weight="600" class="main-text">Paper - AI Writing Assistant Flow</text>
  <text x="700" y="80" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" class="secondary-text">Rich text editor with AI-powered writing, editing, and formatting assistance</text>

  <!-- Phase Labels -->
  <text x="180" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="secondary-text">Create</text>
  <text x="480" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="secondary-text">Edit</text>
  <text x="780" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="secondary-text">AI Assist</text>
  <text x="1100" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="secondary-text">Export</text>

  <!-- MAIN FLOW DIAGRAM -->
  <g id="main-flow">

    <!-- New Document -->
    <g transform="translate(80, 160)">
      <rect x="0" y="0" width="200" height="70" rx="6.5" fill="none" class="neon-blue"/>
      <text x="100" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">New Document</text>
      <text x="100" y="52" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Create or open</text>
    </g>

    <!-- Blank -->
    <g transform="translate(80, 260)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-cyan"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Blank</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Fresh start</text>
    </g>

    <!-- Template -->
    <g transform="translate(185, 260)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-purple"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Template</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Pre-built</text>
    </g>

    <!-- Import -->
    <g transform="translate(80, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-orange"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Import</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">MD, DOCX</text>
    </g>

    <!-- AI Generate -->
    <g transform="translate(185, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-green"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">AI Gen ✨</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">From prompt</text>
    </g>

    <!-- Recent -->
    <g transform="translate(80, 440)">
      <rect x="0" y="0" width="200" height="60" rx="6.5" fill="none" class="neon-pink"/>
      <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="main-text">Recent Documents</text>
      <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">Quick access</text>
    </g>

    <!-- Rich Editor -->
    <g transform="translate(380, 160)">
      <rect x="0" y="0" width="200" height="70" rx="6.5" fill="none" class="neon-purple"/>
      <text x="100" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">Rich Editor</text>
      <text x="100" y="52" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Write content</text>
    </g>

    <!-- Formatting -->
    <g transform="translate(380, 260)">
      <rect x="0" y="0" width="200" height="60" rx="6.5" fill="none" class="neon-purple"/>
      <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="main-text">Formatting</text>
      <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">Bold, italic, headers</text>
    </g>

    <!-- Lists -->
    <g transform="translate(380, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-cyan"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Lists</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Bullets</text>
    </g>

    <!-- Tables -->
    <g transform="translate(485, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-cyan"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Tables</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Grid data</text>
    </g>

    <!-- Code Blocks -->
    <g transform="translate(380, 440)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-orange"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Code</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Syntax HL</text>
    </g>

    <!-- Images -->
    <g transform="translate(485, 440)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-pink"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Images</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Media</text>
    </g>

    <!-- AI Assist -->
    <g transform="translate(680, 160)">
      <rect x="0" y="0" width="200" height="70" rx="6.5" fill="none" class="neon-green"/>
      <text x="100" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">AI Assist ✨</text>
      <text x="100" y="52" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Writing helper</text>
    </g>

    <!-- Continue Writing -->
    <g transform="translate(680, 260)">
      <rect x="0" y="0" width="200" height="60" rx="6.5" fill="none" class="neon-green"/>
      <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="main-text">Continue Writing</text>
      <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">Auto-complete</text>
    </g>

    <!-- Improve -->
    <g transform="translate(680, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-yellow"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Improve</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Rewrite</text>
    </g>

    <!-- Summarize -->
    <g transform="translate(785, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-cyan"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Summary</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Condense</text>
    </g>

    <!-- Translate -->
    <g transform="translate(680, 440)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-purple"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Translate</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Languages</text>
    </g>

    <!-- Grammar -->
    <g transform="translate(785, 440)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-orange"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">Grammar</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Fix errors</text>
    </g>

    <!-- Export -->
    <g transform="translate(980, 160)">
      <rect x="0" y="0" width="200" height="70" rx="6.5" fill="none" class="neon-cyan"/>
      <text x="100" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">Export</text>
      <text x="100" y="52" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Save and share</text>
    </g>

    <!-- Markdown -->
    <g transform="translate(980, 260)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-green"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">.md</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Markdown</text>
    </g>

    <!-- PDF -->
    <g transform="translate(1085, 260)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-orange"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">.pdf</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Document</text>
    </g>

    <!-- HTML -->
    <g transform="translate(980, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-purple"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">.html</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Web page</text>
    </g>

    <!-- DOCX -->
    <g transform="translate(1085, 350)">
      <rect x="0" y="0" width="95" height="60" rx="6.5" fill="none" class="neon-blue"/>
      <text x="47" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="15" font-weight="500" class="main-text">.docx</text>
      <text x="47" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Word</text>
    </g>

    <!-- Auto-Save -->
    <g transform="translate(980, 440)">
      <rect x="0" y="0" width="200" height="60" rx="6.5" fill="none" class="neon-pink"/>
      <text x="100" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="main-text">Auto-Save</text>
      <text x="100" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">Never lose work</text>
    </g>

    <!-- Arrows - Main Flow -->
    <line x1="280" y1="195" x2="375" y2="195" class="arrow-color" stroke-width="2.6" marker-end="url(#arrow)" opacity="0.7"/>
    <line x1="580" y1="195" x2="675" y2="195" class="arrow-color" stroke-width="2.6" marker-end="url(#arrow)" opacity="0.7"/>
    <line x1="880" y1="195" x2="975" y2="195" class="arrow-color" stroke-width="2.6" marker-end="url(#arrow)" opacity="0.7"/>

    <!-- Create to Editor -->
    <path d="M175 290 Q300 290 340 230 L375 195" fill="none" class="arrow-color" stroke-width="2" stroke-dasharray="3.9,3.9" marker-end="url(#arrow)" opacity="0.4"/>
    <path d="M175 380 Q320 380 350 250 L375 195" fill="none" class="arrow-color" stroke-width="2" stroke-dasharray="3.9,3.9" marker-end="url(#arrow)" opacity="0.4"/>

    <!-- Editor to AI -->
    <line x1="580" y1="290" x2="675" y2="290" class="arrow-color" stroke-width="1.5" marker-end="url(#arrow)" opacity="0.4"/>

  </g>

  <!-- PROGRESS INDICATOR -->
  <g id="progress-legend" transform="translate(0, 520)">
    <rect x="100" y="30" width="1200" height="80" fill="url(#flowGradient)" rx="10" opacity="0.2"/>

    <!-- Stage markers -->
    <circle cx="200" cy="70" r="12" class="neon-blue" fill="none" stroke-width="3"/>
    <text x="200" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" class="main-text">1</text>

    <circle cx="500" cy="70" r="12" class="neon-purple" fill="none" stroke-width="3"/>
    <text x="500" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" class="main-text">2</text>

    <circle cx="800" cy="70" r="12" class="neon-green" fill="none" stroke-width="3"/>
    <text x="800" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" class="main-text">3</text>

    <circle cx="1100" cy="70" r="12" class="neon-cyan" fill="none" stroke-width="3"/>
    <text x="1100" y="75" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" class="main-text">4</text>

    <!-- Connecting lines -->
    <line x1="212" y1="70" x2="488" y2="70" class="arrow-color" stroke-width="2" opacity="0.3"/>
    <line x1="512" y1="70" x2="788" y2="70" class="arrow-color" stroke-width="2" opacity="0.3"/>
    <line x1="812" y1="70" x2="1088" y2="70" class="arrow-color" stroke-width="2" opacity="0.3"/>

    <!-- Stage labels -->
    <text x="200" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="500" class="main-text">Create</text>
    <text x="200" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">New document</text>

    <text x="500" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="500" class="main-text">Write</text>
    <text x="500" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">Rich text editing</text>

    <text x="800" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="500" class="main-text">Enhance</text>
    <text x="800" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">AI assistance</text>

    <text x="1100" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="500" class="main-text">Export</text>
    <text x="1100" y="150" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" class="secondary-text">Multiple formats</text>
  </g>

  <!-- AI Features Legend -->
  <g transform="translate(100, 720)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="600" class="main-text">AI Writing Features:</text>

    <rect x="0" y="20" width="16" height="16" rx="3" fill="none" class="neon-green" stroke-width="2"/>
    <text x="25" y="33" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Auto-complete sentences</text>

    <rect x="250" y="20" width="16" height="16" rx="3" fill="none" class="neon-yellow" stroke-width="2"/>
    <text x="275" y="33" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Improve writing style</text>

    <rect x="480" y="20" width="16" height="16" rx="3" fill="none" class="neon-cyan" stroke-width="2"/>
    <text x="505" y="33" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Summarize content</text>

    <rect x="700" y="20" width="16" height="16" rx="3" fill="none" class="neon-purple" stroke-width="2"/>
    <text x="725" y="33" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Multi-language translate</text>

    <rect x="950" y="20" width="16" height="16" rx="3" fill="none" class="neon-orange" stroke-width="2"/>
    <text x="975" y="33" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Grammar and spelling</text>
  </g>

  <!-- Keyboard shortcuts -->
  <g transform="translate(100, 780)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="600" class="main-text">Shortcuts:</text>
    <text x="100" y="0" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Ctrl+B = Bold | Ctrl+I = Italic | Ctrl+K = Link | Ctrl+/ = AI assist | Ctrl+S = Save | Ctrl+E = Export | Ctrl+Z = Undo</text>
  </g>

  <!-- API Endpoints -->
  <g transform="translate(100, 820)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="600" class="main-text">Endpoints:</text>
    <text x="100" y="0" font-family="monospace, sans-serif" font-size="13" class="secondary-text">GET /api/paper/documents | POST /api/paper/save | POST /api/paper/ai/continue | POST /api/paper/ai/improve | GET /api/paper/export/{format}</text>
  </g>

</svg>
