<svg viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg" style="background: transparent;">
  <style>
    /* Ensure transparent background */
    svg {
      background: transparent !important;
    }

    /* CSS Custom Properties for theme switching */
    :root {
      /* Light theme defaults */
      --main-text-color: #1a1a1a;
      --secondary-text-color: #666;
      --arrow-color: #666;

      /* Neon colors for light theme */
      --neon-blue: #4A90E2;
      --neon-orange: #F5A623;
      --neon-purple: #BD10E0;
      --neon-green: #7ED321;
      --neon-cyan: #50E3C2;
      --neon-red: #E24A4A;

      --neon-stroke-width: 2.6;
    }

    /* Dark theme override */
    @media (prefers-color-scheme: dark) {
      :root {
        --main-text-color: #FFFFFF;
        --secondary-text-color: #B0B0B0;
        --arrow-color: #B0B0B0;

        /* Neon colors for dark theme */
        --neon-blue: #00D4FF;
        --neon-orange: #FF9500;
        --neon-purple: #E040FB;
        --neon-green: #00FF88;
        --neon-cyan: #00E5EA;
        --neon-red: #FF4A4A;

        --neon-stroke-width: 2.8;
      }
    }

    /* Classes using CSS custom properties */
    .neon-blue {
      stroke: var(--neon-blue);
      stroke-width: var(--neon-stroke-width);
      fill: none;
    }
    .neon-orange {
      stroke: var(--neon-orange);
      stroke-width: var(--neon-stroke-width);
      fill: none;
    }
    .neon-purple {
      stroke: var(--neon-purple);
      stroke-width: var(--neon-stroke-width);
      fill: none;
    }
    .neon-green {
      stroke: var(--neon-green);
      stroke-width: var(--neon-stroke-width);
      fill: none;
    }
    .neon-cyan {
      stroke: var(--neon-cyan);
      stroke-width: var(--neon-stroke-width);
      fill: none;
    }
    .neon-red {
      stroke: var(--neon-red);
      stroke-width: var(--neon-stroke-width);
      fill: none;
    }

    .main-text {
      fill: var(--main-text-color);
    }
    .secondary-text {
      fill: var(--secondary-text-color);
    }
    .arrow-line {
      stroke: var(--arrow-color);
      fill: none;
    }
    .arrow-head {
      fill: var(--arrow-color);
      stroke: none;
    }

    /* Dark theme glow effects */
    @media (prefers-color-scheme: dark) {
      .neon-blue {
        filter: drop-shadow(0 0 4px #00D4FF) drop-shadow(0 0 8px #00A0FF);
      }
      .neon-orange {
        filter: drop-shadow(0 0 4px #FF9500) drop-shadow(0 0 8px #FF7700);
      }
      .neon-purple {
        filter: drop-shadow(0 0 4px #E040FB) drop-shadow(0 0 8px #D500F9);
      }
      .neon-green {
        filter: drop-shadow(0 0 4px #00FF88) drop-shadow(0 0 8px #00E676);
      }
      .neon-cyan {
        filter: drop-shadow(0 0 4px #00E5EA) drop-shadow(0 0 8px #00BCD4);
      }
      .neon-red {
        filter: drop-shadow(0 0 4px #FF4A4A) drop-shadow(0 0 8px #FF0000);
      }
    }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" class="arrow-head"/>
    </marker>

    <linearGradient id="migrationGradient" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#E24A4A;stop-opacity:0.3" />
      <stop offset="50%" style="stop-color:#F5A623;stop-opacity:0.3" />
      <stop offset="100%" style="stop-color:#7ED321;stop-opacity:0.3" />
    </linearGradient>
  </defs>

  <!-- Title -->
  <text x="700" y="45" text-anchor="middle" font-family="Arial, sans-serif" font-size="32" font-weight="600" class="main-text">Enterprise Migration Architecture</text>

  <!-- Section Labels -->
  <text x="250" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="21" font-weight="500" class="secondary-text">Current State</text>
  <text x="700" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="21" font-weight="500" class="secondary-text">Migration Process</text>
  <text x="1150" y="95" text-anchor="middle" font-family="Arial, sans-serif" font-size="21" font-weight="500" class="secondary-text">Target State</text>

  <!-- Current State - Cloud Services -->
  <g id="current-state">
    <!-- Big Tech Cloud -->
    <rect x="100" y="130" width="300" height="350" class="neon-red" rx="6.5" stroke-dasharray="5,5" opacity="0.5"/>
    <text x="250" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">Big Tech Cloud</text>

    <!-- Microsoft 365 / Google Workspace -->
    <rect x="120" y="190" width="120" height="60" class="neon-red" rx="6.5"/>
    <text x="180" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" class="main-text">M365/Google</text>

    <!-- Individual Services -->
    <rect x="260" y="190" width="120" height="60" class="neon-orange" rx="6.5"/>
    <text x="320" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">OneDrive/</text>
    <text x="320" y="238" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Google Drive</text>

    <rect x="120" y="270" width="120" height="60" class="neon-purple" rx="6.5"/>
    <text x="180" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Outlook/</text>
    <text x="180" y="318" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Gmail</text>

    <rect x="260" y="270" width="120" height="60" class="neon-blue" rx="6.5"/>
    <text x="320" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Teams/</text>
    <text x="320" y="318" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Meet</text>

    <rect x="120" y="350" width="120" height="60" class="neon-cyan" rx="6.5"/>
    <text x="180" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">SharePoint/</text>
    <text x="180" y="398" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Sites</text>

    <rect x="260" y="350" width="120" height="60" class="neon-green" rx="6.5"/>
    <text x="320" y="380" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Copilot/</text>
    <text x="320" y="398" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Gemini</text>

    <!-- Issues -->
    <text x="250" y="440" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">• Vendor Lock-in</text>
    <text x="250" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">• Monthly Costs</text>
  </g>

  <!-- Migration Process -->
  <g id="migration">
    <!-- Migration Box -->
    <rect x="500" y="130" width="400" height="350" rx="6.5" fill="none" stroke="url(#migrationGradient)" stroke-width="3" opacity="0.8"/>
    <text x="700" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">Migration Tools</text>

    <!-- Tools -->
    <rect x="520" y="190" width="160" height="50" class="neon-orange" rx="6.5"/>
    <text x="600" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">rclone</text>

    <rect x="720" y="190" width="160" height="50" class="neon-purple" rx="6.5"/>
    <text x="800" y="220" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">imapsync</text>

    <rect x="520" y="260" width="160" height="50" class="neon-blue" rx="6.5"/>
    <text x="600" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">BASIC Scripts</text>

    <rect x="720" y="260" width="160" height="50" class="neon-cyan" rx="6.5"/>
    <text x="800" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">API Migration</text>

    <rect x="520" y="330" width="160" height="50" class="neon-green" rx="6.5"/>
    <text x="600" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">KB Converter</text>

    <rect x="720" y="330" width="160" height="50" class="neon-red" rx="6.5"/>
    <text x="800" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">User Import</text>

    <!-- Steps -->
    <text x="700" y="410" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">1. Export Data</text>
    <text x="700" y="430" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">2. Transform Format</text>
    <text x="700" y="450" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">3. Import to GB</text>
    <text x="700" y="470" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">4. Validate</text>
  </g>

  <!-- Target State - General Bots -->
  <g id="target-state">
    <!-- Self-Hosted -->
    <rect x="1000" y="130" width="300" height="350" class="neon-green" rx="6.5" stroke-dasharray="5,5" opacity="0.5"/>
    <text x="1150" y="160" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="500" class="main-text">Self-Hosted Stack</text>

    <!-- General Bots Core -->
    <rect x="1020" y="190" width="260" height="60" class="neon-green" rx="6.5"/>
    <text x="1150" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" class="main-text">General Bots Core</text>

    <!-- Components -->
    <rect x="1020" y="270" width="120" height="50" class="neon-orange" rx="6.5"/>
    <text x="1080" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">MinIO</text>

    <rect x="1160" y="270" width="120" height="50" class="neon-purple" rx="6.5"/>
    <text x="1220" y="300" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Stalwart</text>

    <rect x="1020" y="330" width="120" height="50" class="neon-blue" rx="6.5"/>
    <text x="1080" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">LiveKit</text>

    <rect x="1160" y="330" width="120" height="50" class="neon-cyan" rx="6.5"/>
    <text x="1220" y="360" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Qdrant</text>

    <rect x="1020" y="390" width="120" height="50" class="neon-red" rx="6.5"/>
    <text x="1080" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Local LLM</text>

    <rect x="1160" y="390" width="120" height="50" class="neon-green" rx="6.5"/>
    <text x="1220" y="420" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="main-text">Zitadel</text>

    <!-- Benefits -->
    <text x="1150" y="460" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">✓ Full Control</text>
    <text x="1150" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">✓ No Vendor Lock-in</text>
  </g>

  <!-- Arrows -->
  <g id="arrows" stroke-width="3">
    <!-- From Cloud to Migration -->
    <line x1="400" y1="305" x2="500" y2="305" class="arrow-line" marker-end="url(#arrowhead)" opacity="0.7"/>

    <!-- From Migration to Self-Hosted -->
    <line x1="900" y1="305" x2="1000" y2="305" class="arrow-line" marker-end="url(#arrowhead)" opacity="0.7"/>
  </g>

  <!-- Cost Comparison -->
  <g id="cost-comparison">
    <rect x="100" y="520" width="1200" height="120" rx="10" fill="none" stroke="var(--secondary-text-color)" stroke-width="1" opacity="0.3"/>
    <text x="700" y="550" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="main-text">Cost Comparison</text>

    <!-- Cloud Costs -->
    <text x="250" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="secondary-text">Enterprise Cloud</text>
    <text x="250" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="600" class="main-text">$50-200/user/month</text>
    <text x="250" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Forever</text>

    <!-- Migration -->
    <text x="700" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="secondary-text">Migration Cost</text>
    <text x="700" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="600" class="main-text">One-time effort</text>
    <text x="700" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">1-4 weeks</text>

    <!-- Self-Hosted -->
    <text x="1150" y="580" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="secondary-text">Self-Hosted</text>
    <text x="1150" y="605" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="600" class="main-text">Infrastructure only</text>
    <text x="1150" y="625" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">~$500/month total</text>
  </g>

  <!-- Timeline -->
  <g id="timeline">
    <text x="700" y="680" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="500" class="main-text">Typical Migration Timeline</text>

    <!-- Timeline bar -->
    <rect x="200" y="710" width="1000" height="10" rx="5" fill="url(#migrationGradient)" opacity="0.5"/>

    <!-- Milestones -->
    <circle cx="200" cy="715" r="8" class="neon-red"/>
    <text x="200" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Start</text>
    <text x="200" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Assessment</text>

    <circle cx="450" cy="715" r="8" class="neon-orange"/>
    <text x="450" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Week 1</text>
    <text x="450" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Infrastructure</text>

    <circle cx="700" cy="715" r="8" class="neon-purple"/>
    <text x="700" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Week 2</text>
    <text x="700" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Data Migration</text>

    <circle cx="950" cy="715" r="8" class="neon-blue"/>
    <text x="950" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Week 3</text>
    <text x="950" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Testing</text>

    <circle cx="1200" cy="715" r="8" class="neon-green"/>
    <text x="1200" y="745" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" class="secondary-text">Week 4</text>
    <text x="1200" y="765" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" class="secondary-text">Go Live</text>
  </g>

  <!-- Footer -->
  <text x="700" y="850" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="secondary-text">
    Transform from mega-prompt dependency to true component architecture
  </text>
  <text x="700" y="875" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" class="secondary-text">
    Your data, your infrastructure, your control
  </text>

  <!-- JavaScript to handle theme switching from parent document -->
  <script type="text/javascript">
    <![CDATA[
    // Function to update CSS variables based on parent theme
    function updateTheme() {
      try {
        // Check if we're in an iframe/object context
        const parentDoc = window.parent?.document || window.top?.document;
        if (!parentDoc) return;

        const rootElement = document.documentElement;
        const htmlElement = parentDoc.documentElement;
        const bodyElement = parentDoc.body;

        // Check for various theme indicators
        const isRust = htmlElement.classList.contains('rust') || bodyElement.classList.contains('rust');
        const isLight = htmlElement.classList.contains('light') || bodyElement.classList.contains('light');
        const isDark = htmlElement.classList.contains('dark') ||
                      htmlElement.classList.contains('ayu') ||
                      htmlElement.classList.contains('navy') ||
                      htmlElement.classList.contains('coal') ||
                      bodyElement.classList.contains('theme--dark');

        // Apply theme-specific CSS variables
        if (isRust || isLight) {
          // Force black text for Rust/Light themes
          rootElement.style.setProperty('--main-text-color', '#1a1a1a');
          rootElement.style.setProperty('--secondary-text-color', '#666');
          rootElement.style.setProperty('--arrow-color', '#666');
        } else if (isDark) {
          // White text for dark themes
          rootElement.style.setProperty('--main-text-color', '#ffffff');
          rootElement.style.setProperty('--secondary-text-color', '#b0b0b0');
          rootElement.style.setProperty('--arrow-color', '#b0b0b0');
        }
      } catch (e) {
        // Silent fail if we can't access parent document (cross-origin)
      }
    }

    // Update theme on load
    updateTheme();

    // Listen for theme changes if possible
    try {
      if (window.parent && window.parent !== window) {
        // Try to observe parent document changes
        const observer = new MutationObserver(updateTheme);
        observer.observe(window.parent.document.documentElement, {
          attributes: true,
          attributeFilter: ['class']
        });
        observer.observe(window.parent.document.body, {
          attributes: true,
          attributeFilter: ['class']
        });
      }
    } catch (e) {
      // Silent fail if cross-origin
    }
    ]]>
  </script>
</svg>
