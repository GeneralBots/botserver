<svg width="900" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#888"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial, sans-serif" font-size="18" font-weight="bold" fill="#CBD5E0">Database Schema Overview</text>

  <!-- Organizations -->
  <rect x="50" y="60" width="180" height="60" fill="none" stroke="#4299E1" stroke-width="2" rx="5"/>
  <text x="140" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#63B3ED">organizations</text>
  <text x="140" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#90CDF4">Top Level Entity</text>

  <!-- Bots -->
  <rect x="320" y="60" width="180" height="60" fill="none" stroke="#48BB78" stroke-width="2" rx="5"/>
  <text x="410" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#68D391">bots</text>
  <text x="410" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#9AE6B4">Bot Instances</text>

  <!-- Bot Configuration -->
  <rect x="590" y="60" width="180" height="60" fill="none" stroke="#F6AD55" stroke-width="2" rx="5"/>
  <text x="680" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FBD38D">bot_configuration</text>
  <text x="680" y="105" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FED7AA">Settings</text>

  <!-- Bot Memories -->
  <rect x="220" y="180" width="180" height="60" fill="none" stroke="#B794F4" stroke-width="2" rx="5"/>
  <text x="310" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#D6BCFA">bot_memories</text>
  <text x="310" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#E9D8FD">State Storage</text>

  <!-- KB Collections -->
  <rect x="420" y="180" width="180" height="60" fill="none" stroke="#4FD1C5" stroke-width="2" rx="5"/>
  <text x="510" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#81E6D9">kb_collections</text>
  <text x="510" y="225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#B2F5EA">Knowledge Base</text>

  <!-- KB Documents -->
  <rect x="420" y="280" width="180" height="60" fill="none" stroke="#4FD1C5" stroke-width="2" rx="5"/>
  <text x="510" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#81E6D9">kb_documents</text>
  <text x="510" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#B2F5EA">Documents</text>

  <!-- Users -->
  <rect x="50" y="380" width="180" height="60" fill="none" stroke="#FC8181" stroke-width="2" rx="5"/>
  <text x="140" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FC8181">users</text>
  <text x="140" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FEB2B2">User Accounts</text>

  <!-- User Sessions -->
  <rect x="320" y="380" width="180" height="60" fill="none" stroke="#FBBF24" stroke-width="2" rx="5"/>
  <text x="410" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FCD34D">user_sessions</text>
  <text x="410" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FDE68A">Active Sessions</text>

  <!-- Message History -->
  <rect x="590" y="380" width="180" height="60" fill="none" stroke="#A78BFA" stroke-width="2" rx="5"/>
  <text x="680" y="405" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#C4B5FD">message_history</text>
  <text x="680" y="425" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#DDD6FE">Chat Messages</text>

  <!-- User Login Tokens -->
  <rect x="50" y="480" width="180" height="60" fill="none" stroke="#F87171" stroke-width="2" rx="5"/>
  <text x="140" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#F87171">user_login_tokens</text>
  <text x="140" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FCA5A5">Auth Tokens</text>

  <!-- User KB Associations -->
  <rect x="320" y="480" width="180" height="60" fill="none" stroke="#34D399" stroke-width="2" rx="5"/>
  <text x="410" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#6EE7B7">user_kb_associations</text>
  <text x="410" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#A7F3D0">KB Access</text>

  <!-- Session Tool Associations -->
  <rect x="590" y="480" width="180" height="60" fill="none" stroke="#60A5FA" stroke-width="2" rx="5"/>
  <text x="680" y="505" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#93C5FD">session_tool_associations</text>
  <text x="680" y="525" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#BFDBFE">Tool Access</text>

  <!-- Basic Tools -->
  <rect x="650" y="280" width="180" height="60" fill="none" stroke="#F59E0B" stroke-width="2" rx="5"/>
  <text x="740" y="305" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#FBBF24">basic_tools</text>
  <text x="740" y="325" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FCD34D">BASIC Scripts</text>

  <!-- Relationships -->
  <g stroke="#888" stroke-width="2" fill="none">
    <!-- organizations to bots -->
    <line x1="230" y1="90" x2="320" y2="90" marker-end="url(#arrow)"/>
    <text x="275" y="85" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- bots to bot_configuration -->
    <line x1="500" y1="90" x2="590" y2="90" marker-end="url(#arrow)"/>
    <text x="545" y="85" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- bots to bot_memories -->
    <line x1="360" y1="120" x2="310" y2="180" marker-end="url(#arrow)"/>
    <text x="330" y="150" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- bots to kb_collections -->
    <line x1="460" y1="120" x2="510" y2="180" marker-end="url(#arrow)"/>
    <text x="485" y="150" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- kb_collections to kb_documents -->
    <line x1="510" y1="240" x2="510" y2="280" marker-end="url(#arrow)"/>
    <text x="525" y="260" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- users to user_sessions -->
    <line x1="230" y1="410" x2="320" y2="410" marker-end="url(#arrow)"/>
    <text x="275" y="405" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- user_sessions to message_history -->
    <line x1="500" y1="410" x2="590" y2="410" marker-end="url(#arrow)"/>
    <text x="545" y="405" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- users to user_login_tokens -->
    <line x1="140" y1="440" x2="140" y2="480" marker-end="url(#arrow)"/>
    <text x="155" y="460" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- user_sessions to user_kb_associations -->
    <line x1="410" y1="440" x2="410" y2="480" marker-end="url(#arrow)"/>
    <text x="425" y="460" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- user_sessions to session_tool_associations -->
    <line x1="480" y1="440" x2="620" y2="480" marker-end="url(#arrow)"/>
    <text x="550" y="460" font-family="Arial, sans-serif" font-size="10" fill="#718096">1:N</text>

    <!-- user_kb_associations to kb_collections (reference) -->
    <path d="M 410 480 Q 410 360 510 240" stroke-dasharray="5,5" marker-end="url(#arrow)" opacity="0.6"/>
    <text x="450" y="360" font-family="Arial, sans-serif" font-size="10" fill="#718096">ref</text>

    <!-- session_tool_associations to basic_tools (reference) -->
    <path d="M 680 480 Q 740 400 740 340" stroke-dasharray="5,5" marker-end="url(#arrow)" opacity="0.6"/>
    <text x="710" y="410" font-family="Arial, sans-serif" font-size="10" fill="#718096">ref</text>

    <!-- bots to user_sessions (cross reference) -->
    <path d="M 410 120 Q 410 250 410 380" stroke-dasharray="3,3" opacity="0.4"/>
  </g>

  <!-- Legend -->
  <g id="legend" transform="translate(50, 550)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#CBD5E0">Legend:</text>
    <line x1="80" y1="-5" x2="120" y2="-5" stroke="#888" stroke-width="2" marker-end="url(#arrow)"/>
    <text x="125" y="0" font-family="Arial, sans-serif" font-size="11" fill="#A0AEC0">1:N Relationship</text>

    <line x1="250" y1="-5" x2="290" y2="-5" stroke="#888" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrow)" opacity="0.6"/>
    <text x="295" y="0" font-family="Arial, sans-serif" font-size="11" fill="#A0AEC0">Reference</text>
  </g>
</svg>
