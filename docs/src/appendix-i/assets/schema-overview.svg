<svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#666"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="400" y="25" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="600" fill="#333">Database Schema Overview</text>

  <!-- Top Level -->
  <!-- Organizations -->
  <rect x="20" y="60" width="120" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="80" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">organizations</text>

  <!-- Bots -->
  <rect x="200" y="60" width="100" height="40" fill="none" stroke="#7ED321" stroke-width="2" rx="5"/>
  <text x="250" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">bots</text>

  <!-- Bot Configuration -->
  <rect x="360" y="60" width="120" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="420" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">bot_configuration</text>

  <!-- Users -->
  <rect x="540" y="60" width="100" height="40" fill="none" stroke="#BD10E0" stroke-width="2" rx="5"/>
  <text x="590" y="85" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">users</text>

  <!-- Middle Layer -->
  <!-- Bot Memories -->
  <rect x="20" y="140" width="120" height="40" fill="none" stroke="#50E3C2" stroke-width="2" rx="5"/>
  <text x="80" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">bot_memories</text>

  <!-- KB Collections -->
  <rect x="180" y="140" width="120" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="240" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">kb_collections</text>

  <!-- User Sessions -->
  <rect x="340" y="140" width="120" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="400" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">user_sessions</text>

  <!-- Basic Tools -->
  <rect x="500" y="140" width="100" height="40" fill="none" stroke="#7ED321" stroke-width="2" rx="5"/>
  <text x="550" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">basic_tools</text>

  <!-- Message History -->
  <rect x="640" y="140" width="120" height="40" fill="none" stroke="#BD10E0" stroke-width="2" rx="5"/>
  <text x="700" y="165" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">message_history</text>

  <!-- Bottom Layer -->
  <!-- KB Documents -->
  <rect x="20" y="220" width="120" height="40" fill="none" stroke="#50E3C2" stroke-width="2" rx="5"/>
  <text x="80" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">kb_documents</text>

  <!-- User Login Tokens -->
  <rect x="180" y="220" width="140" height="40" fill="none" stroke="#4A90E2" stroke-width="2" rx="5"/>
  <text x="250" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">user_login_tokens</text>

  <!-- User KB Associations -->
  <rect x="360" y="220" width="160" height="40" fill="none" stroke="#F5A623" stroke-width="2" rx="5"/>
  <text x="440" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">user_kb_associations</text>

  <!-- Session Tool Associations -->
  <rect x="560" y="220" width="180" height="40" fill="none" stroke="#7ED321" stroke-width="2" rx="5"/>
  <text x="650" y="245" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#333">session_tool_associations</text>

  <!-- Arrows -->
  <g stroke="#666" stroke-width="2" fill="none">
    <!-- organizations to bots -->
    <line x1="140" y1="80" x2="200" y2="80" marker-end="url(#arrow)"/>

    <!-- bots to bot_configuration -->
    <line x1="300" y1="80" x2="360" y2="80" marker-end="url(#arrow)"/>

    <!-- bots to bot_memories -->
    <path d="M250,100 Q250,120 80,120 Q80,130 80,140" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- bots to kb_collections -->
    <path d="M250,100 Q250,120 240,120 Q240,130 240,140" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- users to user_sessions -->
    <path d="M590,100 Q590,120 400,120 Q400,130 400,140" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- user_sessions to message_history -->
    <path d="M460,160 Q530,160 640,160" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- kb_collections to kb_documents -->
    <path d="M240,180 Q240,200 80,200 Q80,210 80,220" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- users to user_login_tokens -->
    <path d="M590,100 Q590,200 250,200 Q250,210 250,220" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.4"/>

    <!-- user_sessions to user_kb_associations -->
    <path d="M400,180 Q400,200 440,200 Q440,210 440,220" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- user_sessions to session_tool_associations -->
    <path d="M460,160 Q550,190 650,220" marker-end="url(#arrow)" opacity="0.6"/>

    <!-- session_tool_associations refs basic_tools -->
    <path d="M650,220 Q650,200 550,200 Q550,190 550,180" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.4"/>

    <!-- user_kb_associations refs kb_collections -->
    <path d="M440,220 Q440,200 240,200 Q240,190 240,180" stroke-dasharray="3,3" marker-end="url(#arrow)" opacity="0.4"/>
  </g>

  <!-- Relationship Labels -->
  <text x="170" y="75" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="330" y="75" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="165" y="135" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="245" y="135" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="495" y="135" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="550" y="155" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="160" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="420" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="550" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">1:N</text>
  <text x="340" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">ref</text>
  <text x="600" y="210" font-family="Arial, sans-serif" font-size="11" fill="#666">ref</text>

  <!-- Info Box -->
  <g transform="translate(20, 290)">
    <rect width="760" height="80" fill="none" stroke="#666" stroke-width="1" rx="5" opacity="0.3"/>
    <text x="10" y="20" font-family="Arial, sans-serif" font-size="12" font-weight="600" fill="#333">Entity Categories:</text>
    <text x="10" y="40" font-family="Arial, sans-serif" font-size="12" fill="#666">Core: organizations, bots, users • State: bot_memories, user_sessions, message_history</text>
    <text x="10" y="55" font-family="Arial, sans-serif" font-size="12" fill="#666">Knowledge: kb_collections, kb_documents • Tools: basic_tools • Auth: user_login_tokens</text>
    <text x="10" y="70" font-family="Arial, sans-serif" font-size="12" fill="#666">Associations: user_kb_associations, session_tool_associations, bot_configuration</text>
  </g>

  <!-- Description -->
  <text x="400" y="390" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#666">
    Multi-tenant database schema supporting organizations with multiple bots, user sessions, knowledge bases, and tools
  </text>
</svg>
